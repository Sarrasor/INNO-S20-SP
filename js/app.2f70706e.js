(function(t){function e(e){for(var s,r,o=e[0],l=e[1],c=e[2],d=0,p=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],s=!0,o=1;o<i.length;o++){var l=i[o];0!==n[l]&&(s=!1)}s&&(a.splice(e--,1),t=r(r.s=i[0]))}return t}var s={},n={app:0},a=[];function r(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=s,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/INNO-S20-SP/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},1833:function(t,e,i){},5652:function(t,e,i){"use strict";var s=i("b2dd"),n=i.n(s);n.a},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",[i("Instruction",{attrs:{instructions:t.instructions},on:{select:t.selectInstruction,upload:t.uploadInstruction}}),i("div",{staticClass:"card",staticStyle:{"margin-top":"20px",width:"430px"}},[i("p",{staticClass:"label bold"},[t._v("files")]),i("FileUpload",{ref:"fileUpload",on:{upload:t.validateMediaLinks},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}})],1)],1),i("Step",{attrs:{steps:t.steps},on:{select:t.selectStep}}),i("Asset",{attrs:{assets:t.assets}}),i("Render",{attrs:{assets:t.assets,files:t.files}})],1)},a=[],r=(i("4de4"),i("7db0"),i("4160"),i("c975"),i("d81d"),i("b0c0"),i("b64b"),i("2ca0"),i("159b"),i("b85c")),o=(i("96cf"),i("1da1")),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card"},[i("p",{staticClass:"label bold"},[t._v("instructions")]),t.instructions?[i("div",{staticClass:"toolbar"},[t.instructions?i("button",{attrs:{tooltip:"create new"},on:{click:t.createInstruction}},[i("i",{staticClass:"material-icons-outlined"},[t._v("add")])]):t._e(),t.instruction?[i("button",{attrs:{tooltip:"duplicate"},on:{click:t.duplicateInstruction}},[i("i",{staticClass:"material-icons-outlined"},[t._v("library_add")])]),i("button",{attrs:{tooltip:"upload to server"},on:{click:function(e){return t.$emit("upload")}}},[i("i",{staticClass:"material-icons-outlined"},[t._v("publish")])]),i("button",{attrs:{tooltip:"delete"},on:{click:t.deleteInstruction}},[i("i",{staticClass:"material-icons-outlined"},[t._v("delete")])])]:t._e()],2),t.instructions.length>0?i("div",{staticClass:"list",staticStyle:{height:"125px"}},t._l(t.instructions,(function(e,s){return i("button",{key:s,class:{selected:s===t.selected},on:{click:function(e){t.selected=s}}},[t._v(t._s(e.index.name))])})),0):t._e()]:t._e(),t.instruction?[i("p",{staticClass:"label"},[t._v("name")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.instruction.index.name,expression:"instruction.index.name"}],attrs:{type:"text"},domProps:{value:t.instruction.index.name},on:{input:function(e){e.target.composing||t.$set(t.instruction.index,"name",e.target.value)}}}),i("p",{staticClass:"label"},[t._v("description")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.instruction.index.description,expression:"instruction.index.description"}],domProps:{value:t.instruction.index.description},on:{input:function(e){e.target.composing||t.$set(t.instruction.index,"description",e.target.value)}}}),t._v(" "),i("p",{staticClass:"label"},[t._v("preview")]),i("FileDrop",{attrs:{types:[1]},model:{value:t.instruction.index.preview_url,callback:function(e){t.$set(t.instruction.index,"preview_url",e)},expression:"instruction.index.preview_url"}})]:t._e()],2)},c=[],u=(i("a434"),i("ec26")),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{delete:t.file},attrs:{id:"root"},on:{drop:t.drop,dragover:function(t){return t.preventDefault()},click:function(e){return t.$emit("drop",null)}}},[t.file?i("p",[t._v(t._s(t.file))]):i("p",{staticClass:"label"},[t._v("drag an uploaded file here")])])},p=[],h=(i("caad"),i("2532"),{name:"FileDrop",props:["file","types"],model:{prop:"file",event:"drop"},methods:{drop:function(t){var e=JSON.parse(t.dataTransfer.getData("text"));this.types&&!this.types.includes(e.type)||this.$emit("drop",e.name)}}}),f=h,m=(i("81b6"),i("2877")),v=Object(m["a"])(f,d,p,!1,null,"2695726c",null),b=v.exports,y={name:"Instruction",props:["instructions"],components:{FileDrop:b},data:function(){return{selected:void 0}},watch:{instructions:function(t){t&&this.selectLast()}},computed:{instruction:function(){var t;return this.$emit("select",this.selected),(null===(t=this.instructions)||void 0===t?void 0:t.length)>0?this.instructions[this.selected]:null}},methods:{createInstruction:function(){this.instructions.push({index:{id:Object(u["a"])(),name:"Instruction "+(this.instructions.length+1),size:0,description:"",preview_url:"",step_count:0,last_modified:""},steps:[],files:[]}),this.selected=this.instructions.length-1},duplicateInstruction:function(){var t=JSON.parse(JSON.stringify(this.instruction));t.index.id=Object(u["a"])(),t.index.name+=" (copy)",this.instructions.push(t),this.selectLast()},deleteInstruction:function(){this.instructions.splice(this.selected,1),this.selected>=this.instructions.length&&this.selectLast()},selectLast:function(){this.selected>=this.instructions.length&&(this.selected=this.instructions.length-1)}}},_=y,g=Object(m["a"])(_,l,c,!1,null,null,null),w=g.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"card"},[i("p",{staticClass:"label bold"},[t._v("steps")]),t.steps?[i("div",{staticClass:"toolbar"},[i("button",{attrs:{tooltip:"create new"},on:{click:t.createStep}},[i("i",{staticClass:"material-icons-outlined"},[t._v("add")])]),t.step?[i("button",{attrs:{tooltip:"duplicate"},on:{click:t.duplicateStep}},[i("i",{staticClass:"material-icons-outlined"},[t._v("library_add")])]),i("button",{attrs:{tooltip:"delete"},on:{click:t.deleteStep}},[i("i",{staticClass:"material-icons-outlined"},[t._v("delete")])]),i("button",{attrs:{tooltip:"move up"},on:{click:function(e){return t.reoderSteps(!0)}}},[i("i",{staticClass:"material-icons-outlined"},[t._v("arrow_upward")])]),i("button",{attrs:{tooltip:"move down"},on:{click:function(e){return t.reoderSteps(!1)}}},[i("i",{staticClass:"material-icons-outlined"},[t._v("arrow_downward")])])]:t._e()],2),t.steps.length>0?i("div",{staticClass:"list",staticStyle:{height:"125px"}},t._l(t.steps,(function(e,s){return i("button",{key:s,class:{selected:s===t.selected},on:{click:function(e){t.selected=s}}},[t._v(t._s(e.name))])})),0):t._e()]:t._e(),t.step?[i("p",{staticClass:"label"},[t._v("name")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.step.name,expression:"step.name"}],attrs:{type:"text"},domProps:{value:t.step.name},on:{input:function(e){e.target.composing||t.$set(t.step,"name",e.target.value)}}}),i("p",{staticClass:"label"},[t._v("description")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.step.description,expression:"step.description"}],domProps:{value:t.step.description},on:{input:function(e){e.target.composing||t.$set(t.step,"description",e.target.value)}}}),t._v(" "),i("p",{staticClass:"label"},[t._v("preview")]),i("FileDrop",{attrs:{types:[1]},model:{value:t.step.preview_url,callback:function(e){t.$set(t.step,"preview_url",e)},expression:"step.preview_url"}})]:t._e()],2)])},C=[],O={name:"Step",props:["steps"],components:{FileDrop:b},data:function(){return{selected:void 0}},computed:{step:function(){var t;return this.$emit("select",this.selected),(null===(t=this.steps)||void 0===t?void 0:t.length)>0?this.steps[this.selected]:null}},watch:{steps:function(t){t&&this.selectLast()}},methods:{createStep:function(){this.steps.push({name:"Step "+(this.steps.length+1),description:"",preview_url:"",assets:[]}),this.selectLast()},duplicateStep:function(){var t=JSON.parse(JSON.stringify(this.step));t.name+=" (copy)",this.steps.push(t),this.selectLast()},deleteStep:function(){this.steps.splice(this.selected,1),this.selected>=this.steps.length&&this.selectLast()},selectLast:function(){this.selected=this.steps.length-1},reoderSteps:function(t){var e=this.selected+(t?-1:1);if(!(e<0||e>=this.steps.length)){var i=this.steps[e];this.steps[e]=this.steps[this.selected],this.steps[this.selected]=i,this.selected=e}}}},k=O,S=Object(m["a"])(k,x,C,!1,null,null,null),L=S.exports,j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"card"},[i("p",{staticClass:"label bold"},[t._v("assets")]),t.assets?[i("div",{staticClass:"toolbar"},[i("button",{attrs:{tooltip:"create new"},on:{click:t.createAsset}},[i("i",{staticClass:"material-icons-outlined"},[t._v("add")])]),t.asset?[i("button",{attrs:{tooltip:"duplicate"},on:{click:t.duplicateAsset}},[i("i",{staticClass:"material-icons-outlined"},[t._v("library_add")])]),i("button",{attrs:{tooltip:"awlays face camera"},on:{click:function(e){t.asset.billboard=!t.asset.billboard}}},[t.asset.billboard?i("i",{staticClass:"material-icons-outlined"},[t._v("screen_rotation")]):i("i",{staticClass:"material-icons-outlined"},[t._v("screen_lock_rotation")])]),i("button",{attrs:{tooltip:"toggle visibility"},on:{click:function(e){t.asset.hidden=!t.asset.hidden}}},[t.asset.hidden?i("i",{staticClass:"material-icons-outlined"},[t._v("visibility_off")]):i("i",{staticClass:"material-icons-outlined"},[t._v("visibility")])]),i("button",{attrs:{tooltip:"delete"},on:{click:t.deleteAsset}},[i("i",{staticClass:"material-icons-outlined"},[t._v("delete")])])]:t._e()],2),t.assets.length>0?i("div",{staticClass:"list",staticStyle:{height:"125px"}},t._l(t.assets,(function(e,s){return i("button",{key:s,class:{selected:s===t.selected},on:{click:function(e){t.selected=s}}},[t._v(t._s(e.name))])})),0):t._e()]:t._e(),t.asset?[i("p",{staticClass:"label"},[t._v("name")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.asset.name,expression:"asset.name"}],attrs:{type:"text"},domProps:{value:t.asset.name},on:{input:function(e){e.target.composing||t.$set(t.asset,"name",e.target.value)}}}),i("p",{staticClass:"label"},[t._v("description")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.asset.media.description,expression:"asset.media.description"}],domProps:{value:t.asset.media.description},on:{input:function(e){e.target.composing||t.$set(t.asset.media,"description",e.target.value)}}}),t._v(" "),i("p",{staticClass:"label"},[t._v("media")]),i("FileDrop",{model:{value:t.asset.media.url,callback:function(e){t.$set(t.asset.media,"url",e)},expression:"asset.media.url"}}),i("p",{staticClass:"label"},[t._v("position")]),i("Vector",{attrs:{vector:t.asset.transform.position}}),i("p",{staticClass:"label"},[t._v("orientation")]),i("Vector",{attrs:{vector:t.asset.transform.orientation}}),i("p",{staticClass:"label"},[t._v("scale")]),i("Vector",{attrs:{min:.1,vector:t.asset.transform,keys:["scale"]}})]:t._e()],2)])},M=[],A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"root"}},t._l(t.skeys,(function(e){return i("input",{key:e,ref:e,refInFor:!0,style:{width:t.width},attrs:{type:"number",step:"0.1"},on:{input:function(i){return t.validate(e)},blur:function(i){return t.blur(e)}}})})),0)},I=[],z=(i("d3b7"),i("ddb0"),{name:"Vector",props:["vector","min","keys"],computed:{skeys:function(){var t;return null!==(t=this.keys)&&void 0!==t?t:Object.keys(this.vector)},width:function(){return 100/this.skeys.length+"%"}},watch:{vector:{handler:function(){this.blurAll()},deep:!0}},mounted:function(){this.blurAll()},methods:{blurAll:function(){var t,e=Object(r["a"])(this.skeys);try{for(e.s();!(t=e.n()).done;){var i=t.value;this.blur(i)}}catch(s){e.e(s)}finally{e.f()}},blur:function(t){this.$refs[t][0].value=this.vector[t]},validate:function(t){var e=this.$toFloat(this.$refs[t][0].value);this.vector[t]=this.min?Math.max(this.min,e):e}}}),P=z,$=(i("af75"),Object(m["a"])(P,A,I,!1,null,"2ade9797",null)),T=$.exports,V={name:"Asset",props:["assets"],components:{FileDrop:b,Vector:T},data:function(){return{selected:void 0}},computed:{asset:function(){var t;return this.$emit("select",this.selected),(null===(t=this.assets)||void 0===t?void 0:t.length)>0?this.assets[this.selected]:null}},watch:{assets:function(t){t&&this.selectLast()}},methods:{createAsset:function(){this.assets.push({id:Object(u["a"])(),name:"Asset "+(this.assets.length+1),media:{type:0,url:"",description:""},transform:{position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0},scale:1},hidden:!1,billboard:!1}),this.selectLast()},duplicateAsset:function(){var t=JSON.parse(JSON.stringify(this.asset));t.id=Object(u["a"])(),t.name+=" (copy)",this.assets.push(t),this.selectLast()},deleteAsset:function(){this.assets.splice(this.selected,1),this.selected>=this.assets.length&&this.selectLast()},selectLast:function(){this.selected=this.assets.length-1}}},R=V,D=Object(m["a"])(R,j,M,!1,null,"3ee78eb5",null),F=D.exports,N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card"},[i("canvas",{ref:"canvas"})])},E=[],B=(i("a4d3"),i("e01a"),i("d4ec")),J=i("bee2"),U=i("633b"),H=(i("b234"),i("6fcd")),X=(i("dd4a"),0),Z=1,Y=2,q=3,G=4;function W(t,e,i){function s(t,e){for(var i=0;i<e.length;i++)if(e[i].name==t)return e[i]}function n(e){for(var i=0;i<t.assets.length;i++)if(t.assets[i].id==e)return t.assets[i];return null}if(!e||0==e.length||1==e.length&&""==e[0].media.url&&""==e[0].media_desc)return t;for(var a=0;a<e.length;a++){var r,o,l=e[a],c=null;""!=l.media.url&&(c=s(e[a].media.url,i));var u=n(l.id);t.manageAsset(u,l.id,l.name,c?c.type:0,{media_desc:l.media.description,position:{x:l.transform.position.x,y:l.transform.position.y,z:l.transform.position.z},rotation:{x:l.transform.orientation.x,y:l.transform.orientation.y,z:l.transform.orientation.z},scale:l.transform.scale,billboard:l.billboard,hidden:l.hidden,url:null===(r=c)||void 0===r?void 0:r.content,uurl:null===(o=c)||void 0===o?void 0:o.url})}return t}var K=function(){function t(e){Object(B["a"])(this,t),this.node=e,this.createScene(),this.assets=[]}return Object(J["a"])(t,[{key:"manageAsset",value:function(t,e,i,s,n){if(null==t){var a=new Q(e,i,s,this.scene,{media_desc:n.media_desc,url:n.url,uurl:n.uurl,position:{x:n.position.x,y:n.position.y,z:n.position.z},rotation:{x:n.rotation.x,y:n.rotation.y,z:n.rotation.z},scale:n.scale,hidden:n.hidden,billboard:n.billboard});this.assets.push(a)}else{var r=t;r.name=i,r.hidden=n.hidden,r.media_type!=s||r.url!=n.url||r.billboard!=n.billboard||r.media_type==X&&r.media_desc!=n.media_desc?(r.media_type=s,r.url=n.url,r.uurl=n.uurl,r.billboard=n.billboard,r.model.dispose(),r.media_desc=n.media_desc,r.loadObject(this.scene,(function(){r.setScale(n.scale),r.setPosition({x:n.position.x,y:n.position.y,z:n.position.z}),r.setOrientation({x:n.rotation.x,y:n.rotation.y,z:n.rotation.z}),r.setTransparent(r.hidden)}))):(r.media_desc=n.media_desc,r.setScale(n.scale),r.setPosition({x:n.position.x,y:n.position.y,z:n.position.z}),r.setOrientation({x:n.rotation.x,y:n.rotation.y,z:n.rotation.z}),r.setTransparent(r.hidden))}}},{key:"findAssetIndexById",value:function(t){for(var e=0;e<this.assets.length;e++)if(this.assets[e].id==t)return e}},{key:"deleteAsset",value:function(t){var e=this.findAssetIndexById(t);this.assets[e].model.dispose(),this.assets.splice(e)}},{key:"createScene",value:function(){var t=new U["Engine"](this.node,!1,{preserveDrawingBuffer:!0,stencil:!0}),e=new U["Scene"](t);e.createDefaultCameraOrLight(!0,!0,!0),e.activeCamera.beta-=.2,e.activeCamera.upperBetaLimit=Math.PI/2.1,e.activeCamera.lowerRadiusLimit=3,e.activeCamera.upperRadiusLimit=20,e.activeCamera.setTarget(new U["Vector3"](0,0,0)),e.activeCamera.setPosition(new U["Vector3"](0,3,10)),e.clearColor=new U["Color3"](.5,.8,.5),e.lights[0].dispose();var i=new U["DirectionalLight"]("light1",new U["Vector3"](-2,-3,1),e);i.position=new U["Vector3"](0,0,10),i.intensity=1;for(var s=[],n=0;n<6;n++)s.push(new U["HemisphericLight"]("HemiLight",new U["Vector3"](0,-.001,0),e)),s[n].intensity=.8;s[0].position=new U["Vector3"](0,2,5),s[1].position=new U["Vector3"](5,2,0),s[2].position=new U["Vector3"](-5,2,0),s[3].position=new U["Vector3"](0,2,-5),s[4].position=new U["Vector3"](0,-5,0),s[5].position=new U["Vector3"](0,8,0);var a=e.createDefaultEnvironment({groundShadowLevel:-5});a.setMainColor(new U["Color3"](.698,.502,.69)),t.runRenderLoop((function(){e.render()}));var r=function(t){var i=U["Mesh"].CreateLines("axisX",[new U["Vector3"](-t,0,0),new U["Vector3"](t,0,0),new U["Vector3"](t,0,0)],e);i.color=new U["Color3"](1,0,0);var s=U["MeshBuilder"].CreateCylinder("cone",{diameterBottom:.2,diameterTop:.03,tessellation:100,height:.2},e);s.position=new U["Vector3"](-t,0,0),s.rotation=new U["Vector3"](Math.PI/2,-Math.PI/2,0),s.material=new U["StandardMaterial"]("matX",e),s.material.emissiveColor=new U["Color3"](1,0,0),s.material.diffuseColor=new U["Color3"](1,0,0);var n=U["Mesh"].CreateLines("axisY",[new U["Vector3"].Zero,new U["Vector3"](0,2*t/3,0),new U["Vector3"](0,2*t/3,0)],e);n.color=new U["Color3"](0,1,0);var a=U["MeshBuilder"].CreateCylinder("cone",{diameterBottom:.2,diameterTop:.03,tessellation:100,height:.2},e);a.position=new U["Vector3"](0,2/3*t,0),a.rotation=new U["Vector3"](0,0,0),a.material=new U["StandardMaterial"]("matY",e),a.material.emissiveColor=new U["Color3"](0,1,0),a.material.diffuseColor=new U["Color3"](0,1,0);var r=U["Mesh"].CreateLines("axisZ",[new U["Vector3"](0,0,-t),new U["Vector3"](0,0,t),new U["Vector3"](0,0,t)],e);r.color=new U["Color3"](0,0,1);var o=U["MeshBuilder"].CreateCylinder("cone",{diameterBottom:.2,diameterTop:.03,tessellation:100,height:.2},e);o.position=new U["Vector3"](0,0,t),o.rotation=new U["Vector3"](Math.PI/2,0,0),o.material=new U["StandardMaterial"]("matZ",e),o.material.emissiveColor=new U["Color3"](0,0,1),o.material.diffuseColor=new U["Color3"](0,0,1)};r(5),this.scene=e}}]),t}(),Q=function(){function t(e,i,s,n,a){Object(B["a"])(this,t),this.id=e,this.name=i,this.media_type=s,this.media_desc=a.media_desc,this.url=a.url,this.uurl=a.uurl,this.scale=a.scale,this.hidden=a.hidden,this.billboard=a.billboard,this.loadObject(n,(function(){})),this.setScale(a.scale),this.setPosition({x:a.position.x,y:a.position.y,z:a.position.z}),this.setOrientation({x:a.rotation.x,y:a.rotation.y,z:a.rotation.z}),this.setTransparent(a.hidden)}return Object(J["a"])(t,[{key:"setPosition",value:function(t){this.model.position.x=-t.x,this.model.position.y=t.y,this.model.position.z=t.z,this.media_type==X?this.model.position.y+=.1*this.scale:this.media_type==Z&&(this.model.position.y+=1*this.scale)}},{key:"setOrientation",value:function(t){if(this.billboard){if(this.media_type==Z)return this.model.rotation.x=0,this.model.rotation.y=0,void(this.model.rotation.z=0);if(this.media_type==X)return this.model.rotation.x=t.x*Math.PI/180-Math.PI/2,this.model.rotation.y=t.y*Math.PI/180,void(this.model.rotation.z=t.z*Math.PI/180)}var e=this.model.rotation.x,i=this.model.rotation.y,s=this.model.rotation.z;this.model.rotation.x=t.x*Math.PI/180,this.model.rotation.y=t.y*Math.PI/180,this.model.rotation.z=t.z*Math.PI/180,this.media_type==X?(this.model.rotation.x-=Math.PI/2,this.model.rotation.z+=Math.PI):this.media_type==Z?this.model.rotation.y+=Math.PI:this.media_type==G&&(this.model.rotate(U["Axis"].X,this.model.rotation.x-e,U["Space"].LOCAL),this.model.rotate(U["Axis"].Y,this.model.rotation.y-i,U["Space"].LOCAL),this.model.rotate(U["Axis"].Z,this.model.rotation.z-s,U["Space"].LOCAL))}},{key:"setScale",value:function(t){this.model.scaling.x=t,this.model.scaling.y=t,this.model.scaling.z=t,this.scale=t}},{key:"setTransparent",value:function(t){t?(this.media_type!=Z&&this.media_type!=X||(this.modelMaterial.alpha=.5),this.media_type==G&&(this.model.visibility=.5,this.modelMaterial.alpha=.5)):(this.media_type==Z&&(this.modelMaterial.alpha=1),this.media_type==G&&(this.model.visibility=1,this.modelMaterial.alpha=1))}},{key:"loadObject",value:function(t,e){switch(this.media_type){case X:this.loadText(t,e);break;case Z:case Y:case q:this.loadImage(t,e);break;case G:this.load3DObject(t,e);break}}},{key:"loadText",value:function(t,e){var i=U["Mesh"].CreateGround("ground",8,6,2,t,!0),s=H["AdvancedDynamicTexture"].CreateForMesh(i,1024,1024,!0,!0);i.emissiveTexture=s;var n=new H["TextBlock"];n.text=this.media_desc,n.color="red",n.fontSize=40,n.fontFamily="sans serif",s.addControl(n),this.billboard&&(i.billboardMode=U["Mesh"].BILLBOARDMODE_ALL),this.model=i,e()}},{key:"loadImage",value:function(t,e){var i=this,s=new Image;function n(e,i,s,n){var a=new U["StandardMaterial"]("material",t);a.emissiveTexture=new U["Texture"](s.url,t),a.emissiveTexture.hasAlpha=!0,a.backFaceCulling=!1,a.disableLighting=!0,s.modelMaterial=a;var r=2,o=r*i/e;s.img_width=o,s.img_height=r;var l=new U["MeshBuilder"].CreatePlane(s.name,{height:r,width:o},t);l.updatable=!0,l.material=a,s.billboard&&(a.backFaceCulling=!0,l.billboardMode=U["Mesh"].BILLBOARDMODE_ALL),s.model=l,n()}s.onload=function(){n(this.height,this.width,i,e)},s.src=i.url}},{key:"load3DObject",value:function(t,e){var i=this;U["SceneLoader"].LoadAssetContainer("",i.uurl,t,(function(t){i.model=t.meshes[0],i.modelMaterial=t.materials[0],t.addAllToScene()}),void 0,void 0,".glb"),e()}}]),t}(),tt={name:"Render",props:["assets","files"],data:function(){return{slide:null,ids:[]}},watch:{assets:{handler:function(){this.render()},deep:!0},files:{handler:function(){this.render()},deep:!0}},mounted:function(){this.slide=new K(this.$refs.canvas)},methods:{render:function(){var t,e=this;W(this.slide,this.assets,this.files);var i=(null!==(t=this.assets)&&void 0!==t?t:[]).map((function(t){return t.id}));this.ids.filter((function(t){return!i.includes(t)})).forEach((function(t){return e.slide.deleteAsset(t)})),this.ids=i}}},et=tt,it=(i("5652"),Object(m["a"])(et,N,E,!1,null,"8ad95b70",null)),st=it.exports,nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.files?i("div",{attrs:{id:"root"}},[i("div",{staticClass:"list",staticStyle:{height:"125px"}},t._l(t.files,(function(e,s){return i("button",{key:s,attrs:{draggable:""},on:{dragstart:function(e){return t.drag(e,s)}}},[t._v(t._s(e.name))])})),0),i("div",{attrs:{id:"drop"},on:{click:function(e){return t.$refs.input.click()},drop:t.drop,dragover:function(t){return t.preventDefault()}}},[i("p",{attrs:{id:"empty"}},[t._v("click or drag your local files here to upload them")]),i("br"),i("p",{attrs:{id:"empty"}},[t._v("or drag an uploaded file to delete it")]),i("input",{ref:"input",attrs:{hidden:"",multiple:"",type:"file",accept:t.extensions.join()},on:{change:function(e){t.upload(Array.from(e.target.files))}}})])]):t._e()},at=[],rt=(i("99af"),i("0481"),i("a630"),i("4069"),i("ac1f"),i("3ca3"),i("5319"),i("1276"),i("2b3d"),i("3835")),ot={name:"FileUpload",props:["files"],data:function(){return{images:[".bmp",".jpeg",".jpg",".png"],audios:[".mp3"],videos:[".mp4"],models:[".glb",".gltf",".bin"]}},computed:{types:function(){return[this.images,this.audios,this.videos,this.models]},extensions:function(){return this.types.flat()},names:function(){return this.files.map((function(t){return t.name}))}},methods:{upload:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.t0=e,i.t1=e.files,i.next=4,Promise.all(t.filter((function(t){return!e.names.includes(t.name)})).map(e.readFile));case 4:i.t2=i.sent,i.t3=i.t1.concat.call(i.t1,i.t2),i.t0.$emit.call(i.t0,"upload",i.t3);case 7:case"end":return i.stop()}}),i)})))()},readFile:function(t){var e=window.URL.createObjectURL(t),i=this.getType;return new Promise((function(s,n){var a=new FileReader;a.onload=function(){return s({name:t.name,type:i(t.name),content:a.result,url:e})},a.onerror=n,a.readAsDataURL(t)}))},deserealizeFile:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var s,n,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.async("base64");case 2:return s=i.sent,i.next=5,t.async("blob");case 5:return n=i.sent,a=t.name.replace("media/",""),i.abrupt("return",{name:a,type:e.getType(a),content:s,url:window.URL.createObjectURL(n)});case 8:case"end":return i.stop()}}),i)})))()},getExt:function(t){return"."+t.split(".").pop()},getType:function(t){var e,i=this.getExt(t),s=Object(r["a"])(this.types.entries());try{for(s.s();!(e=s.n()).done;){var n=Object(rt["a"])(e.value,2),a=n[0],o=n[1];if(o.includes(i))return a+1}}catch(l){s.e(l)}finally{s.f()}return 0},drop:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var s,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.preventDefault(),!((null===(s=t.dataTransfer.files)||void 0===s?void 0:s.length)>0)){i.next=6;break}return i.next=4,e.upload(Array.from(t.dataTransfer.files).filter((function(t){return e.extensions.includes(e.getExt(t.name))})));case 4:i.next=9;break;case 6:n=JSON.parse(t.dataTransfer.getData("text")),window.URL.revokeObjectURL(n.url),e.$emit("upload",e.files.filter((function(t){return t.name!==n.name})));case 9:case"end":return i.stop()}}),i)})))()},drag:function(t,e){t.dataTransfer.setData("text/plain",JSON.stringify(this.files[e]))}},model:{prop:"files",event:"upload"}},lt=ot,ct=(i("8ab5"),Object(m["a"])(lt,nt,at,!1,null,"0172851e",null)),ut=ct.exports,dt=i("c4e3");s["a"].prototype.$toFloat=function(t){return t=parseFloat(t),isNaN(t)?0:t};var pt={name:"App",components:{Instruction:w,Step:L,Asset:F,Render:st,FileUpload:ut},data:function(){return{instruction:null,instructions:[],files:[],steps:[],assets:[]}},mounted:function(){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{validateMediaLinks:function(){var t=this,e=function(e){return!t.instruction.files.find((function(t){return t.name===e}))};e(this.instruction.preview_url)&&(this.instruction.preview_url="");var i,s=Object(r["a"])(this.instruction.steps);try{for(s.s();!(i=s.n()).done;){var n=i.value;e(n.preview_url)&&(n.preview_url="");var a,o=Object(r["a"])(n.assets);try{for(o.s();!(a=o.n()).done;){var l=a.value;e(l.media.url)&&(l.media.url="",l.media.type=0)}}catch(c){o.e(c)}finally{o.f()}}}catch(c){s.e(c)}finally{s.f()}},selectInstruction:function(t){var e,i,s;this.instruction=(null===(e=this.instructions)||void 0===e?void 0:e.length)>0?this.instructions[t]:null,this.steps=null===(i=this.instruction)||void 0===i?void 0:i.steps,this.files=null===(s=this.instruction)||void 0===s?void 0:s.files},selectStep:function(t){var e;this.assets=(null===(e=this.steps)||void 0===e?void 0:e.length)>0?this.steps[t].assets:null},downloadInstruction:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function i(){var s,n,a,o,l,c,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=new dt,i.next=3,s.loadAsync(t);case 3:return i.t0=JSON,i.next=6,s.file("index.json").async("string");case 6:return i.t1=i.sent,i.t2=i.t0.parse.call(i.t0,i.t1),i.t3=JSON,i.next=11,s.file("steps.json").async("string");case 11:return i.t4=i.sent,i.t5=i.t3.parse.call(i.t3,i.t4),i.t6=[],n={index:i.t2,steps:i.t5,files:i.t6},i.next=17,Object.keys(s.folder().files).filter((function(t){return t.startsWith("media/")})).map((function(t){return s.files[t]})).filter((function(t){return!t.dir}));case 17:a=i.sent,o=Object(r["a"])(a),i.prev=19,o.s();case 21:if((l=o.n()).done){i.next=29;break}return c=l.value,i.next=25,e.$refs.fileUpload.deserealizeFile(c);case 25:u=i.sent,n.files.push(u);case 27:i.next=21;break;case 29:i.next=34;break;case 31:i.prev=31,i.t7=i["catch"](19),o.e(i.t7);case 34:return i.prev=34,o.f(),i.finish(34);case 37:e.instructions.push(n);case 38:case"end":return i.stop()}}),i,null,[[19,31,34,37]])})))()},uploadInstruction:function(){var t=this.instruction,e=t.steps,i=t.files,s=t.index;s.step_count=e.length,s.last_modified=Date.now(),e.forEach((function(t){return t.assets.filter((function(t){return t.media.url})).forEach((function(t){return t.media.type=i.find((function(e){return e.name===t.media.url})).type}))}));var n=new dt;n.file(s.id+"/index.json",JSON.stringify(s)),n.file(s.id+"/steps.json",JSON.stringify(e)),i.forEach((function(t){n.file(s.id+"/media/"+t.name,t.content.substring(t.content.indexOf("base64,")+"base64,".length),{base64:!0})})),n.generateAsync({type:"blob",compression:"DEFLATE"}).then((function(t){var e=new XMLHttpRequest;e.open("POST","https://ad0d9c3e.ngrok.io",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(t)}))}}},ht=pt,ft=(i("9f41"),Object(m["a"])(ht,n,a,!1,null,"16ed8be2",null)),mt=ft.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(mt)}}).$mount("#app")},6242:function(t,e,i){},"81b6":function(t,e,i){"use strict";var s=i("1833"),n=i.n(s);n.a},"8ab5":function(t,e,i){"use strict";var s=i("eaca"),n=i.n(s);n.a},"9f41":function(t,e,i){"use strict";var s=i("6242"),n=i.n(s);n.a},af75:function(t,e,i){"use strict";var s=i("e887"),n=i.n(s);n.a},b2dd:function(t,e,i){},e887:function(t,e,i){},eaca:function(t,e,i){}});
//# sourceMappingURL=app.2f70706e.js.map